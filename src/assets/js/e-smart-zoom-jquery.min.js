function transitionEnd(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in e)if(void 0!==t.style[o])return{end:e[o]};return!1}!function(t){t.fn.smartZoom=function(e){function o(t){}function n(t,e){var o=S.data("smartZoomData");o.currentWheelDelta*e<0&&(o.currentWheelDelta=0),o.currentWheelDelta+=e,A.zoom(o.mouseWheelDeltaFactor*o.currentWheelDelta,{x:t.pageX,y:t.pageY})}function i(t){t.preventDefault()}function a(){var t=S.data("smartZoomData");if(1==t.settings.mouseMoveEnabled&&1==t.settings.moveCursorEnabled){var e=w().width/t.originalSize.width;parseInt(100*e)>parseInt(100*t.adjustedPosInfos.scale)?S.css({cursor:"move"}):S.css({cursor:"default"})}}function s(t){f(t.pageX,t.pageY)}function r(e){e.preventDefault(),t(document).on("mousemove.smartZoom",u),t(document).bind("mouseup.smartZoom",c);var o=S.data("smartZoomData");o.moveCurrentPosition=new E(e.pageX,e.pageY),o.moveLastPosition=new E(e.pageX,e.pageY)}function u(t){var e=S.data("smartZoomData");(e.mouseMoveForPan||!e.mouseMoveForPan&&e.moveCurrentPosition.x!=t.pageX&&e.moveCurrentPosition.y!=t.pageY)&&(e.mouseMoveForPan=!0,h(t.pageX,t.pageY,0,!1))}function c(e){var o=S.data("smartZoomData");if(o.mouseMoveForPan)if(o.mouseMoveForPan=!1,o.moveLastPosition.distance(o.moveCurrentPosition)>4){var n=o.moveLastPosition.interpolate(o.moveCurrentPosition,-4);h(n.x,n.y,500,!0)}else h(o.moveLastPosition.x,o.moveLastPosition.y,0,!0);else o.settings.zoomOnSimpleClick&&f(e.pageX,e.pageY);t(document).unbind("mousemove.smartZoom"),t(document).unbind("mouseup.smartZoom")}function l(e){e.preventDefault(),t(document).unbind("touchmove.smartZoom"),t(document).unbind("touchend.smartZoom"),t(document).bind("touchmove.smartZoom",m),t(document).bind("touchend.smartZoom",d);var o,n=e.originalEvent.touches,i=n[0],a=S.data("smartZoomData");a.touch.touchMove=!1,a.touch.touchPinch=!1,a.moveCurrentPosition=new E(i.pageX,i.pageY),a.moveLastPosition=new E(i.pageX,i.pageY),a.touch.lastTouchPositionArr=new Array;for(var s=n.length,r=0;r<s;++r)o=n[r],a.touch.lastTouchPositionArr.push(new E(o.pageX,o.pageY))}function m(t){var e=S.data("smartZoomData"),o=t.originalEvent.touches,n=o.length,i=o[0];if(1!=n||e.touch.touchPinch||1!=e.settings.touchMoveEnabled){if(2==n&&!e.touch.touchMove&&1==e.settings.pinchEnabled){e.touch.touchPinch=!0;var a=o[1],s=e.touch.lastTouchPositionArr[0],r=e.touch.lastTouchPositionArr[1],u=new E(i.pageX,i.pageY),c=new E(a.pageX,a.pageY),l=u.distance(c),m=s.distance(r),d=l-m;if(Math.abs(d)<3)return;var f=new E((u.x+c.x)/2,(u.y+c.y)/2),p=w(),v=e.originalSize,g=p.width/v.width,b=l/m,P=p.width*b/v.width;A.zoom(P-g,f,0),e.touch.lastTouchPositionArr[0]=u,e.touch.lastTouchPositionArr[1]=c}}else{if(!e.touch.touchMove){if(e.touch.lastTouchPositionArr[0].distance(new E(i.pageX,i.pageY))<3)return;e.touch.touchMove=!0}h(i.pageX,i.pageY,0,!1)}}function d(e){e.preventDefault(),0==e.originalEvent.touches.length&&(t(document).unbind("touchmove.smartZoom"),t(document).unbind("touchend.smartZoom"));var o=S.data("smartZoomData");if(!o.touch.touchPinch)if(o.touch.touchMove){if(o.moveLastPosition.distance(o.moveCurrentPosition)>2){var n=o.moveLastPosition.interpolate(o.moveCurrentPosition,-4);h(n.x,n.y,500,!0)}}else{if(1==o.settings.dblTapEnabled&&0!=o.touch.lastTouchEndTime&&(new Date).getTime()-o.touch.lastTouchEndTime<400){var i=o.touch.lastTouchPositionArr[0];f(i.x,i.y)}o.touch.lastTouchEndTime=(new Date).getTime()}}function h(t,e,n,i){p(o.PAN);var a=S.data("smartZoomData");a.moveLastPosition.x=a.moveCurrentPosition.x,a.moveLastPosition.y=a.moveCurrentPosition.y;var s=S.offset(),r=w(),u=v(s.left+(t-a.moveCurrentPosition.x),s.top+(e-a.moveCurrentPosition.y),r.width,r.height);P(o.PAN,o.START,!1),b(S,u.x,u.y,r.width,r.height,n,1==i?function(){P(o.PAN,o.END,!1)}:null),a.moveCurrentPosition.x=t,a.moveCurrentPosition.y=e}function f(t,e){var o,n=S.data("smartZoomData"),i=n.originalSize,a=w().width/i.width,s=n.adjustedPosInfos.scale,r=parseFloat(n.settings.dblClickMaxScale);o=a.toFixed(2)>r.toFixed(2)||Math.abs(r-a)>Math.abs(a-s)?r-a:s-a,A.zoom(o,{x:t,y:e})}function p(e){var o=S.data("smartZoomData");if(o.transitionObject){o.transitionObject.cssAnimHandler&&S.off(t.support.transition,o.transitionObject.cssAnimTimer);var n=o.originalSize,i=w(),s=new Object;s[o.transitionObject.transition]="all 0s",o.transitionObject.css3dSupported?s[o.transitionObject.transform]="translate3d("+i.x+"px, "+i.y+"px, 0) scale3d("+i.width/n.width+","+i.height/n.height+", 1)":s[o.transitionObject.transform]="translateX("+i.x+"px) translateY("+i.y+"px) scale("+i.width/n.width+","+i.height/n.height+")",S.css(s)}else S.stop();a(),null!=e&&P(e,"",!0)}function v(t,e,o,n){var i=S.data("smartZoomData"),a=Math.min(i.adjustedPosInfos.top,e);a+=Math.max(0,i.adjustedPosInfos.top+i.adjustedPosInfos.height-(a+n));var s=Math.min(i.adjustedPosInfos.left,t);return new E((s+=Math.max(0,i.adjustedPosInfos.left+i.adjustedPosInfos.width-(s+o))).toFixed(2),a.toFixed(2))}function g(){var t=S.data("smartZoomData"),e=t.containerDiv,o=t.originalSize,n=e.parent().offset(),i=Z(t.settings.left,n.left,e.parent().width()),s=Z(t.settings.top,n.top,e.parent().height());e.offset({left:i,top:s}),e.width(D(t.settings.width,e.parent().width(),i-n.left)),e.height(D(t.settings.height,e.parent().height(),s-n.top));var r=T(e),u=Math.min(Math.min(r.width/o.width,r.height/o.height),1).toFixed(2),c=o.width*u,l=o.height*u;t.adjustedPosInfos={left:(r.width-c)/2+n.left,top:(r.height-l)/2+n.top,width:c,height:l,scale:u},p(),b(S,t.adjustedPosInfos.left,t.adjustedPosInfos.top,c,l,0,function(){S.css("visibility","visible")}),a()}function b(e,o,n,i,a,s,r){var u=S.data("smartZoomData"),c=u.containerDiv.offset(),l=o-c.left,m=n-c.top;if(null!=u.transitionObject){var d=u.originalSize,h=new Object;h[u.transitionObject.transform+"-origin"]="0 0",h[u.transitionObject.transition]="all "+s/1e3+"s ease-out",u.transitionObject.css3dSupported?h[u.transitionObject.transform]="translate3d("+l+"px, "+m+"px, 0) scale3d("+i/d.width+","+a/d.height+", 1)":h[u.transitionObject.transform]="translateX("+l+"px) translateY("+m+"px) scale("+i/d.width+","+a/d.height+")",null!=r&&(u.transitionObject.cssAnimHandler=r,e.one(t.support.transition.end,u.transitionObject.cssAnimHandler)),e.css(h)}else e.animate({"margin-left":l,"margin-top":m,width:i,height:a},{duration:s,easing:u.settings.easing,complete:function(){null!=r&&r()}})}function w(t){var e=S.data("smartZoomData"),o=S.width(),n=S.height(),i=S.offset(),a=parseInt(i.left),s=parseInt(i.top),r=e.containerDiv.offset();if(1!=t&&(a=parseInt(a)-r.left,s=parseInt(s)-r.top),null!=e.transitionObject){var u,c,l=S.css(e.transitionObject.transform);if(l&&""!=l&&-1!=l.search("matrix"))-1!=l.search("matrix3d")?u=(c=l.replace("matrix3d(","").replace(")","").split(","))[0]:(u=(c=l.replace("matrix(","").replace(")","").split(","))[3],a=parseFloat(c[4]),s=parseFloat(c[5]),t&&(a=parseFloat(a)+r.left,s=parseFloat(s)+r.top)),o*=u,n*=u}return{x:a,y:s,width:o,height:n}}function P(t,e,n){var i=S.data("smartZoomData"),a="";if(1==n&&i.currentActionType!=t?(a=i.currentActionType+"_"+o.END,i.currentActionType="",i.currentActionStep=""):i.currentActionType!=t||i.currentActionStep==o.END?(i.currentActionType=t,i.currentActionStep=o.START,a=i.currentActionType+"_"+i.currentActionStep):i.currentActionType==t&&e==o.END&&(i.currentActionStep=o.END,a=i.currentActionType+"_"+i.currentActionStep,i.currentActionType="",i.currentActionStep=""),""!=a){var s=jQuery.Event(a);s.targetRect=w(!0),s.scale=s.targetRect.width/i.originalSize.width,S.trigger(s)}}function y(){for(var e,o=(document.body||document.documentElement).style,n=["transition","WebkitTransition","MozTransition","MsTransition","OTransition"],i=["transition","-webkit-transition","-moz-transition","-ms-transition","-o-transition"],a=["transform","-webkit-transform","-moz-transform","-ms-transform","-o-transform"],s=n.length,r=0;r<s;r++)if(null!=o[n[r]]){transformStr=a[r];var u=t('<div style="position:absolute;">Translate3d Test</div>');if(t("body").append(u),(e=new Object)[a[r]]="translate3d(20px,0,0)",u.css(e),css3dSupported=u.offset().left-t("body").offset().left==20,u.empty().remove(),css3dSupported)return{transition:i[r],transform:a[r],css3dSupported:css3dSupported}}return null}function D(t,e,o){return t.search&&-1!=t.search("%")?(e-o)*(parseInt(t)/100):parseInt(t)}function Z(t,e,o){return t.search&&-1!=t.search("%")?e+o*(parseInt(t)/100):e+parseInt(t)}function x(){g()}function T(t){var e=t.offset();return e?{x:e.left,y:e.top,width:t.outerWidth(),height:t.outerHeight()}:null}function E(t,e){this.x=t,this.y=e,this.toString=function(){return"(x="+this.x+", y="+this.y+")"},this.interpolate=function(t,e){return new E(e*this.x+(1-e)*t.x,e*this.y+(1-e)*t.y)},this.distance=function(t){return Math.sqrt(Math.pow(t.y-this.y,2)+Math.pow(t.x-this.x,2))}}var S=this;o.ZOOM="SmartZoom_ZOOM",o.PAN="SmartZoom_PAN",o.START="START",o.END="END",o.DESTROYED="SmartZoom_DESTROYED";var A={init:function(e){if(!S.data("smartZoomData")){settings=t.extend({top:"0",left:"0",width:"100%",height:"100%",easing:"smartZoomEasing",initCallback:null,maxScale:3,dblClickMaxScale:1.8,mouseEnabled:!0,scrollEnabled:!0,dblClickEnabled:!0,mouseMoveEnabled:!0,moveCursorEnabled:!0,adjustOnResize:!0,touchEnabled:!0,dblTapEnabled:!0,zoomOnSimpleClick:!1,pinchEnabled:!0,touchMoveEnabled:!0,containerBackground:"#FFFFFF",containerClass:""},e);var o=S.attr("style"),a="smartZoomContainer"+(new Date).getTime(),u=t('<div id="'+a+'" class="'+settings.containerClass+'"></div>');S.before(u),S.remove(),(u=t("#"+a)).css({overflow:"hidden"}),""==settings.containerClass&&u.css({"background-color":settings.containerBackground}),u.append(S);var c=new Object;c.lastTouchEndTime=0,c.lastTouchPositionArr=null,c.touchMove=!1,c.touchPinch=!1,S.data("smartZoomData",{settings:settings,containerDiv:u,originalSize:{width:S.width(),height:S.height()},originalPosition:S.offset(),transitionObject:y(),touch:c,mouseWheelDeltaFactor:.15,currentWheelDelta:0,adjustedPosInfos:null,moveCurrentPosition:null,moveLastPosition:null,mouseMoveForPan:!1,currentActionType:"",initialStyles:o,currentActionStep:""}),g(),1==settings.touchEnabled&&S.bind("touchstart.smartZoom",l),1==settings.mouseEnabled&&(1==settings.mouseMoveEnabled&&S.bind("mousedown.smartZoom",r),1==settings.scrollEnabled&&(u.bind("mousewheel.smartZoom",n),u.bind("mousewheel.smartZoom DOMMouseScroll.smartZoom",i)),1==settings.dblClickEnabled&&0==settings.zoomOnSimpleClick&&u.bind("dblclick.smartZoom",s)),document.ondragstart=function(){return!1},1==settings.adjustOnResize&&t(window).bind("resize.smartZoom",x),null!=settings.initCallback&&settings.initCallback.apply(this,S)}},zoom:function(t,e,n){var i,s,r=S.data("smartZoomData");if(e)i=e.x,s=e.y;else{var u=T(r.containerDiv);i=u.x+u.width/2,s=u.y+u.height/2}p(o.ZOOM);var c=w(!0),l=r.originalSize,m=c.width/l.width+t;m=Math.max(r.adjustedPosInfos.scale,m),m=Math.min(r.settings.maxScale,m);var d=l.width*m,h=l.height*m,f=i-c.x,g=s-c.y,y=d/c.width,D=v(c.x-(f*y-f),c.y-(g*y-g),d,h);null==n&&(n=700),P(o.ZOOM,o.START,!1),b(S,D.x,D.y,d,h,n,function(){r.currentWheelDelta=0,a(),P(o.ZOOM,o.END,!1)})},pan:function(t,e,n){if(null!=t&&null!=e){null==n&&(n=700);var i=S.offset(),a=w(),s=v(i.left+t,i.top+e,a.width,a.height);s.x==i.left&&s.y==i.top||(p(o.PAN),P(o.PAN,o.START,!1),b(S,s.x,s.y,a.width,a.height,n,function(){P(o.PAN,o.END,!1)}))}},destroy:function(){var e=S.data("smartZoomData");if(e){p();var n=e.containerDiv;S.unbind("mousedown.smartZoom"),S.bind("touchstart.smartZoom"),n.unbind("mousewheel.smartZoom"),n.unbind("dblclick.smartZoom"),n.unbind("mousewheel.smartZoom DOMMouseScroll.smartZoom"),t(window).unbind("resize.smartZoom"),t(document).unbind("mousemove.smartZoom"),t(document).unbind("mouseup.smartZoom"),t(document).unbind("touchmove.smartZoom"),t(document).unbind("touchend.smartZoom"),S.css({cursor:"default"}),n.before(S),b(S,e.originalPosition.left,e.originalPosition.top,e.originalSize.width,e.originalSize.height,5),S.removeData("smartZoomData"),n.remove(),S.attr("style",e.initialStyles),S.trigger(o.DESTROYED)}},isPluginActive:function(){return null!=S.data("smartZoomData")}};if(A[e])return A[e].apply(this,Array.prototype.slice.call(arguments,1));"object"!=typeof e&&e?t.error("Method "+e+" does not exist on e-smartzoom jquery plugin"):"img"!=S[0].tagName.toLowerCase()||S[0].complete?A.init.apply(S,[arguments[0]]):S.bind("load.smartZoom",{arguments:arguments[0]},function(t){S.unbind("load.smartZoom"),A.init.apply(S,[t.data.arguments])})}}(jQuery),function(t){t.extend(t.easing,{smartZoomEasing:function(e,o,n,i,a){return t.easing.smartZoomOutQuad(e,o,n,i,a)},smartZoomOutQuad:function(t,e,o,n,i){return-n*(e/=i)*(e-2)+o}})}(jQuery),function(t){function e(e){var o=e||window.event,n=[].slice.call(arguments,1),i=0,a=0,s=0;return(e=t.event.fix(o)).type="mousewheel",o.wheelDelta&&(i=o.wheelDelta/120),o.detail&&(i=-o.detail/3),s=i,void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS&&(s=0,a=-1*i),void 0!==o.wheelDeltaY&&(s=o.wheelDeltaY/120),void 0!==o.wheelDeltaX&&(a=-1*o.wheelDeltaX/120),n.unshift(e,i,a,s),(t.event.dispatch||t.event.handle).apply(this,n)}var o=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var n=o.length;n;)t.event.fixHooks[o[--n]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),$.fn.emulateTransitionEnd=function(t){var e=!1,o=this;$(this).one($.support.transition.end,function(){e=!0});return setTimeout(function(){e||$(o).trigger($.support.transition.end)},t),this},$(function(){$.support.transition=transitionEnd()});